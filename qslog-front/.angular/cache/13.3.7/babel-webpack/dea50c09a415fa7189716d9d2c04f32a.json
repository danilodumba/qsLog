{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { FormComponent } from 'src/app/core/form.component';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/core/alert.service\";\nimport * as i3 from \"../services/login.service\";\nimport * as i4 from \"src/app/users/services/user.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\n\nfunction SignInComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1, \"Por favor, informe um login.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SignInComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1, \"Por favor, informe uma senha.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let SignInComponent = /*#__PURE__*/(() => {\n  class SignInComponent extends FormComponent {\n    constructor(router, alertService, loginService, userService) {\n      super(alertService);\n      this.router = router;\n      this.alertService = alertService;\n      this.loginService = loginService;\n      this.userService = userService;\n      this.versao = '';\n      this.createForm();\n    }\n\n    ngOnInit() {\n      this.checkUserAdmin();\n      this.versao = environment.versao;\n    }\n\n    createForm() {\n      this.principalForm = new FormGroup({\n        userName: new FormControl('', Validators.required),\n        password: new FormControl('', Validators.required)\n      });\n    }\n\n    login() {\n      if (this.principalForm.valid) {\n        this.startLoading();\n        this.loginService.login(this.principalForm.value).subscribe(l => {\n          if (l.success) {\n            localStorage.setItem('token', l.token);\n            localStorage.setItem('name', l.name);\n            localStorage.setItem('email', l.email);\n            this.router.navigateByUrl('');\n          } else {\n            this.alertService.showWarning('Errou!!!', 'Login ou senha inválido');\n          }\n\n          this.endLoading();\n        }, e => {\n          this.catchError(e);\n        });\n      }\n\n      this.principalForm.markAllAsTouched();\n    }\n\n    checkUserAdmin() {\n      this.userService.checkUserAdmin().subscribe(() => {}, error => {\n        this.alertService.showError('Deu ruim!', 'Ocorreu um erro ao validar o usuario admin. Verifique o console log');\n        this.catchError(error);\n      });\n    }\n\n  }\n\n  SignInComponent.ɵfac = function SignInComponent_Factory(t) {\n    return new (t || SignInComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.LoginService), i0.ɵɵdirectiveInject(i4.UserService));\n  };\n\n  SignInComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignInComponent,\n    selectors: [[\"app-sign-in\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 23,\n    vars: 6,\n    consts: [[1, \"d-flex\", \"flex-column\", \"flex-root\"], [1, \"login\", \"login-signin-on\", \"d-flex\", \"flex-row-fluid\"], [1, \"d-flex\", \"flex-center\", \"flex-row-fluid\", \"bgi-size-cover\", \"bgi-position-top\", \"bgi-no-repeat\", 2, \"background-image\", \"url('assets/media/bg/bg-3.jpg')\"], [1, \"login-form\", \"text-center\", \"p-7\", \"position-relative\", \"overflow-hidden\"], [1, \"d-flex\", \"flex-center\", \"mb-15\"], [\"href\", \"javascript:;\"], [\"src\", \"assets/media/logos/qslog.png\", 1, \"max-h-75px\"], [1, \"login-signin\"], [1, \"mb-20\"], [1, \"text-muted\", \"font-weight-bold\"], [1, \"form\", 3, \"formGroup\"], [1, \"form-group\", \"mb-5\"], [\"type\", \"text\", \"placeholder\", \"Login\", \"autocomplete\", \"off\", \"formControlName\", \"userName\", 1, \"form-control\", \"h-auto\", \"form-control-solid\", \"py-4\", \"px-8\", 3, \"ngClass\"], [\"class\", \"form-text text-danger\", 4, \"ngIf\"], [\"type\", \"password\", \"placeholder\", \"Senha\", \"formControlName\", \"password\", 1, \"form-control\", \"h-auto\", \"form-control-solid\", \"py-4\", \"px-8\", 3, \"ngClass\"], [1, \"btn\", \"btn-primary\", \"font-weight-bold\", \"px-9\", \"py-4\", \"my-3\", \"mx-4\", 3, \"click\"], [1, \"mt-10\"], [1, \"form-text\", \"text-danger\"]],\n    template: function SignInComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"a\", 5);\n        i0.ɵɵelement(6, \"img\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"div\", 9);\n        i0.ɵɵtext(10, \"Informe seu login e senha:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"form\", 10)(12, \"div\", 11);\n        i0.ɵɵelement(13, \"input\", 12);\n        i0.ɵɵtemplate(14, SignInComponent_span_14_Template, 2, 0, \"span\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 11);\n        i0.ɵɵelement(16, \"input\", 14);\n        i0.ɵɵtemplate(17, SignInComponent_span_17_Template, 2, 0, \"span\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function SignInComponent_Template_button_click_18_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(19, \"Entrar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 16)(21, \"div\", 9);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"formGroup\", ctx.principalForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.classInvalidField(\"userName\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isInvalidField(\"userName\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.classInvalidField(\"password\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isInvalidField(\"password\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.versao);\n      }\n    },\n    directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i6.NgClass, i6.NgIf],\n    styles: [\"\"]\n  });\n  return SignInComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}